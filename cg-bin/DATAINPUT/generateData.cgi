#!/usr/bin/perl -w
use CGI;
use DBI;

use DataParser;

my $query = new CGI;


#my $params = $query->param('data');
#my $fileName =$query->param('sessionId');
#my $categoriesParams = $query->param('categories');
#my $userCogs = $query->param('customCogs');
#my $userMetagenomes = $query->param('customData');

my $params='2007309000-2001200000-2035918000-2003000006-2003000007-2004175001-2030936003-2029527003-2013843002-2010483005-2010483006-2010483002-2010483003-2010483004-2010483001-2010483007-2010483000-2015391000-2015219006-2029527004-2029527005-2029527006-2014730001-2007309001-2009439003-2010170003-2010170002-2010170001-2009439000-2030936005-2012990003-2013505000-2032320009-2032320008-2029527007-2010549000-2021593001-2001200002-2001200003-2001200004-2077657006-2077657007-2004247000-2004247001-2004247002-2004247003-2004247004-2004247005-2004247006-2004247007-2004247008-2004247009-2004080001-2004175000-2004002000-2004002001-2013338003-2044078000-2044078001-2017108002-2014613002-2014613003-2014642001-2014642004-2014642002-2014642000-2014642003-2006207003-2006207004-2006207000-2006207001-2006207002-2006543005-2014031002-2016842008-2013954000-2013515002-2014031005-2014031006-2015219000-2014031004-2016842003-2013843003-2014031003-2015219002-2015219001-2015391001-2013954001-2013515001-2016842005-2014031007-2016842004-2013515000-2044078003-2044078002-2004230001-2004230004-2004230000-2004230003-2004230002-2007427000-2010170004-2004178001-2004178002-2004178003-2004178004-2004247010-2005503000-2004000001-2000000001-2001000000-2000000000-2001200001-2021593004-2081372008-2021593003-2006543007-2013505001-2007915000-2035918001-2035918002-2005137000-2005137001-2005137002-2044078005-2044078004-2029527000-2044078006-2044078007-2035918003-2040502005-2040502004-2053563014-2035918004-2043231000-2044078011';
my $fileName = 'tronchoborroncho';
my $categoriesParams = 'J-A-K-L-B-D-Y-V-T-M';#  C-G-P-Q
my $userMetagenomes = ">Federico\nTOTAL_GENES 23\nCOG0001 14\nCOG0002 9\n>manolo\nTOTAL_GENES 23\nCOG0001 14\nCOG0002 2";
#my $userMetagenomes = "";
my $userCogs = "COG0001";

my $p = new DataParser;
$p->init();
$p->generateClusterData( $params, $fileName, $categoriesParams,$userCogs,$userMetagenomes );

$p->generateCdaData( $params, $fileName, $categoriesParams, $userCogs, $userMetagenomes );

print $query->header;



